#==============================================================================
# Apache 2.4.62+ Main Configuration - Modular
# Production-ready configuration for Yii2 with HTTP/2 and PHP-FPM
#==============================================================================

#------------------------------------------------------------------------------
# Basic Directory Security
#------------------------------------------------------------------------------
<Directory />
    Options -Indexes -Includes -ExecCGI -FollowSymLinks -MultiViews
    AllowOverride None
    Require all denied
</Directory>

<Directory /usr/share>
    AllowOverride None
    Require all granted
</Directory>

<Directory /var/www/>
    Options -Indexes +SymLinksIfOwnerMatch
    AllowOverride None
    Require all granted
</Directory>

#------------------------------------------------------------------------------
# Core Server Settings
#------------------------------------------------------------------------------
DefaultRuntimeDir ${APACHE_RUN_DIR}
ErrorLog ${APACHE_ERROR_LOG_FILE}
Group ${APACHE_RUN_GROUP}
Listen 80
Mutex file:${APACHE_LOCK_DIR} default
PidFile ${APACHE_PID_FILE}
ServerName localhost
ServerRoot "/etc/apache2"
User ${APACHE_RUN_USER}

#------------------------------------------------------------------------------
# MIME Types
#------------------------------------------------------------------------------
<IfModule mime_module>
    TypesConfig /etc/mime.types

    # Modern MIME types
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddType application/x-bzip2 .bz2
    AddType application/wasm .wasm
    AddType application/font-woff2 .woff2
    AddType application/manifest+json .webmanifest
    AddType text/javascript .mjs
</IfModule>

#------------------------------------------------------------------------------
# Load Modules (must be before conf-enabled)
#------------------------------------------------------------------------------
IncludeOptional mods-enabled/*.load
IncludeOptional mods-enabled/*.conf

#------------------------------------------------------------------------------
# Modular Configuration Includes (enabled via a2enconf)
#------------------------------------------------------------------------------
IncludeOptional conf-enabled/*.conf
IncludeOptional sites-enabled/*.conf

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
