#==============================================================================
# PHP-FPM Production Overrides
#==============================================================================


[www]
; Use static process manager for predictable resource usage
pm = static
pm.max_children = ${PHP_FPM_MAX_CHILDREN}

; Increase max requests before recycling
pm.max_requests = 1000

; Disable status and ping for security
ping.path =
pm.status_path =

; Production logging - less verbose
php_admin_flag[display_errors] = off
php_admin_flag[display_startup_errors] = off
php_admin_flag[log_errors] = on
php_admin_value[error_log] = /proc/self/fd/2
php_admin_value[error_reporting] = E_ALL & ~E_DEPRECATED & ~E_STRICT

; Security hardening
php_admin_value[disable_functions] = exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source,phpinfo
php_admin_value[expose_php] = off

; Don't catch worker output in production
catch_workers_output = no

; Disable access log for performance
access.log = /dev/null
